<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enterprise Admin Dashboard - The Aura Inn</title>
    <link rel="stylesheet" href="/css/admin-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Global Matrix Background -->
    <canvas id="matrixCanvasGlobal"
        style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.25; pointer-events: none;"></canvas>
    <div class="admin-layout">
        <!-- Sidebar Partial -->
        <%- include('./partials/sidebar') %>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Top Bar -->
                <header class="top-bar">
                    <div class="page-title">Dashboard Overview</div>
                    <div class="top-actions">
                        <button class="btn-logout" onclick="window.location.href='/'">
                            <i class="fas fa-external-link-alt"></i> View Site
                        </button>
                        <div class="user-profile">
                            <div class="avatar">A</div>
                            <span style="font-size: 0.9rem; font-weight: 500;">Admin</span>
                        </div>
                    </div>
                </header>

                <div class="dashboard-padding">
                    <!-- Stats Grid -->
                    <div class="stats-grid">
                        <!-- Total Bookings -->
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-title">Total Bookings</span>
                                <div class="stat-icon" style="background: #EEF2FF; color: #4F46E5;">
                                    <i class="fas fa-calendar-check"></i>
                                </div>
                            </div>
                            <div class="stat-value">
                                <%= stats.totalBookings %>
                            </div>
                            <div class="stat-trend">
                                <span class="trend-neutral">
                                    <%= stats.pendingCount %> Pending Action
                                </span>
                            </div>
                        </div>

                        <!-- Revenue -->
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-title">Total Revenue</span>
                                <div class="stat-icon" style="background: #ECFDF5; color: #059669;">
                                    <i class="fas fa-rupee-sign"></i>
                                </div>
                            </div>
                            <div class="stat-value">â‚¹<%= stats.revenue.toLocaleString() %>
                            </div>
                            <div class="stat-trend">
                                <span class="trend-up"><i class="fas fa-arrow-up"></i> +12%</span>
                                <span style="color: #64748B;">vs last month</span>
                            </div>
                        </div>

                        <!-- Occupancy -->
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-title">Occupancy Rate</span>
                                <div class="stat-icon" style="background: #FFFBEB; color: #D97706;">
                                    <i class="fas fa-bed"></i>
                                </div>
                            </div>
                            <div class="stat-value">
                                <%= stats.occupancy %>%
                            </div>
                            <div class="progress-bg">
                                <div class="progress-fill"
                                    style="width: <%= stats.occupancy %>%; background: <%= stats.occupancy > 80 ? '#10B981' : '#F59E0B' %>;">
                                </div>
                            </div>
                        </div>

                        <!-- Active Guests -->
                        <div class="stat-card">
                            <div class="stat-header">
                                <span class="stat-title">System Status</span>
                                <div class="stat-icon" style="background: #F0F9FF; color: #0284C7;">
                                    <i class="fas fa-server"></i>
                                </div>
                            </div>
                            <div class="stat-value">98%</div>
                            <div class="stat-trend">
                                <span class="trend-up" style="color: #10B981;">Online</span>
                            </div>
                        </div>
                    </div>

                    <!-- Operational Status -->
                    <div class="status-grid" style="margin-bottom: 2rem;">
                        <div class="status-badge active"
                            style="background: #ECFDF5; border: 1px solid #A7F3D0; color: #065F46;">
                            <span class="status-dot" style="background: #10B981;"></span>
                            AI Concierge: Active
                        </div>
                        <div class="status-badge active"
                            style="background: #ECFDF5; border: 1px solid #A7F3D0; color: #065F46;">
                            <span class="status-dot" style="background: #10B981;"></span>
                            WhatsApp API: Connected
                        </div>
                        <div class="status-badge"
                            style="background: #F8FAFC; border: 1px solid #E2E8F0; color: #64748B;">
                            <span class="status-dot" style="background: #94A3B8;"></span>
                            Smart Locks: Idle
                        </div>
                    </div>

                    <!-- Recent Activity Timeline -->
                    <div class="logs-section">
                        <div class="section-header"
                            style="padding: 1.5rem; border-bottom: 1px solid #E2E8F0; margin-bottom: 0;">
                            <h3 class="section-title">System Activity Log</h3>
                            <button
                                style="font-size: 0.85rem; color: #4F46E5; background: none; border: none; font-weight: 500; cursor: pointer;">View
                                All</button>
                        </div>
                        <div class="timeline" style="padding-top: 1.5rem;">
                            <% if(logs && logs.length> 0) { %>
                                <% logs.slice(0, 8).forEach(log=> { %>
                                    <div class="timeline-item">
                                        <div class="timeline-marker"></div>
                                        <div class="timeline-content">
                                            <span class="timeline-action">
                                                <%= log.action %>
                                            </span>
                                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                                <span class="timeline-time">
                                                    <%= log.time %>
                                                </span>
                                                <span class="timeline-status 
                                                <%= log.status === 'Success' ? 'status-success' : 
                                                   log.status === 'Warning' ? 'status-warning' : 
                                                   log.status === 'Error' ? 'status-error' : 'status-info' %>">
                                                    <%= log.status %>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <% }); %>
                                        <% } else { %>
                                            <div style="padding: 2rem; text-align: center; color: #94A3B8;">No activity
                                                logs found.</div>
                                            <% } %>
                        </div>
                    </div>

                </div>
            </main>
    </div>
    <script src="/js/animations.js"></script>
</body>

</html>